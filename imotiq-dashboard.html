<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ImotIQ ‚Äî Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #C9A84C;
    --gold-light: #E8C97A;
    --gold-dim: rgba(201,168,76,0.15);
    --dark: #0A0A0F;
    --dark-2: #111118;
    --dark-3: #1A1A24;
    --dark-4: #22222E;
    --cream: #F5F0E8;
    --cream-dim: #D4CCB8;
    --accent: #4C7AC9;
    --green: #2ECC8A;
    --green-dim: rgba(46,204,138,0.12);
    --red: #E84C4C;
    --red-dim: rgba(232,76,76,0.12);
    --blue-dim: rgba(76,122,201,0.12);
    --sidebar: 260px;
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    background: var(--dark);
    color: var(--cream);
    font-family: 'DM Sans', sans-serif;
    display: flex;
    min-height: 100vh;
    cursor: none;
  }

  /* CURSOR */
  .cursor { width:10px; height:10px; background:var(--gold); border-radius:50%; position:fixed; pointer-events:none; z-index:9999; transition:transform 0.15s; mix-blend-mode:difference; }
  .cursor-ring { width:32px; height:32px; border:1px solid rgba(201,168,76,0.5); border-radius:50%; position:fixed; pointer-events:none; z-index:9998; transition:all 0.08s; }

  /* SIDEBAR */
  .sidebar {
    width: var(--sidebar);
    min-height: 100vh;
    background: var(--dark-2);
    border-right: 1px solid rgba(255,255,255,0.05);
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0; left: 0; bottom: 0;
    z-index: 50;
  }

  .sidebar-logo {
    padding: 28px 24px 24px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 1.4rem;
  }
  .sidebar-logo span { color: var(--gold); }

  .sidebar-section {
    padding: 20px 16px 8px;
    font-size: 0.62rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: rgba(212,204,184,0.3);
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 16px;
    margin: 2px 8px;
    border-radius: 8px;
    cursor: none;
    transition: all 0.2s;
    color: var(--cream-dim);
    font-size: 0.88rem;
    text-decoration: none;
    position: relative;
  }
  .nav-item:hover { background: rgba(255,255,255,0.04); color: var(--cream); }
  .nav-item.active {
    background: var(--gold-dim);
    color: var(--gold);
  }
  .nav-item.active::before {
    content: '';
    position: absolute;
    left: -8px; top: 50%;
    transform: translateY(-50%);
    width: 3px; height: 60%;
    background: var(--gold);
    border-radius: 0 3px 3px 0;
  }
  .nav-icon { width: 18px; font-size: 1rem; text-align: center; }
  .nav-badge {
    margin-left: auto;
    background: var(--gold);
    color: var(--dark);
    font-size: 0.6rem;
    font-weight: 700;
    padding: 2px 7px;
    border-radius: 100px;
    font-family: 'Syne', sans-serif;
  }

  .sidebar-bottom {
    margin-top: auto;
    padding: 16px;
    border-top: 1px solid rgba(255,255,255,0.05);
  }

  .plan-widget {
    background: var(--gold-dim);
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 12px;
  }
  .plan-name { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.75rem; color: var(--gold); margin-bottom: 4px; }
  .plan-usage { font-size: 0.72rem; color: var(--cream-dim); margin-bottom: 8px; }
  .usage-bar { height: 3px; background: rgba(255,255,255,0.08); border-radius: 3px; overflow: hidden; }
  .usage-fill { height: 100%; background: var(--gold); border-radius: 3px; width: 33%; transition: width 1s ease; }
  .upgrade-btn {
    display: block;
    text-align: center;
    padding: 8px;
    background: var(--gold);
    color: var(--dark);
    border-radius: 6px;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.72rem;
    text-decoration: none;
    margin-top: 10px;
    cursor: none;
    transition: background 0.2s;
  }
  .upgrade-btn:hover { background: var(--gold-light); }

  .user-row {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: none;
  }
  .avatar {
    width: 34px; height: 34px;
    background: linear-gradient(135deg, var(--gold), #8B6A1F);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.8rem;
    color: var(--dark);
    flex-shrink: 0;
  }
  .user-name { font-size: 0.82rem; font-weight: 500; }
  .user-plan { font-size: 0.7rem; color: var(--cream-dim); }
  .logout-btn {
    margin-left: auto;
    background: none;
    border: none;
    color: rgba(212,204,184,0.3);
    cursor: none;
    font-size: 0.8rem;
    transition: color 0.2s;
  }
  .logout-btn:hover { color: var(--red); }

  /* MAIN */
  .main {
    margin-left: var(--sidebar);
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  /* TOP BAR */
  .topbar {
    padding: 20px 36px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--dark);
    position: sticky; top: 0; z-index: 40;
  }
  .page-title {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
  }
  .topbar-right { display: flex; align-items: center; gap: 16px; }
  .notif-btn {
    width: 36px; height: 36px;
    background: var(--dark-3);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    cursor: none;
    font-size: 1rem;
    position: relative;
    transition: border-color 0.2s;
  }
  .notif-btn:hover { border-color: rgba(201,168,76,0.3); }
  .notif-dot {
    position: absolute; top: 6px; right: 6px;
    width: 7px; height: 7px;
    background: var(--gold);
    border-radius: 50%;
    border: 1.5px solid var(--dark);
  }
  .topbar-date { font-size: 0.78rem; color: var(--cream-dim); }

  /* CONTENT */
  .content { padding: 32px 36px; flex: 1; }

  /* HERO ANALYZER */
  .analyzer-section {
    background: var(--dark-3);
    border: 1px solid rgba(201,168,76,0.12);
    border-radius: 16px;
    padding: 36px;
    margin-bottom: 28px;
    position: relative;
    overflow: hidden;
  }
  .analyzer-section::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--gold), transparent);
  }
  .analyzer-bg {
    position: absolute;
    top: -40px; right: -40px;
    width: 300px; height: 300px;
    background: radial-gradient(circle, rgba(201,168,76,0.05), transparent 70%);
    pointer-events: none;
  }

  .analyzer-label {
    font-size: 0.68rem;
    text-transform: uppercase;
    letter-spacing: 0.14em;
    color: var(--gold);
    margin-bottom: 8px;
  }
  .analyzer-title {
    font-family: 'Syne', sans-serif;
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 24px;
  }

  .url-input-wrap {
    display: flex;
    gap: 0;
    margin-bottom: 16px;
  }
  .url-prefix {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(201,168,76,0.15);
    border-right: none;
    padding: 0 16px;
    display: flex; align-items: center;
    font-size: 0.8rem;
    color: var(--cream-dim);
    border-radius: 8px 0 0 8px;
    white-space: nowrap;
    font-family: 'DM Mono', monospace;
  }
  .url-input {
    flex: 1;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(201,168,76,0.15);
    border-right: none;
    padding: 14px 18px;
    color: var(--cream);
    font-family: 'DM Mono', monospace;
    font-size: 0.85rem;
    outline: none;
    transition: border-color 0.2s;
  }
  .url-input:focus { border-color: rgba(201,168,76,0.4); }
  .url-input::placeholder { color: rgba(212,204,184,0.25); }
  .analyze-btn {
    background: var(--gold);
    color: var(--dark);
    border: none;
    padding: 14px 28px;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.88rem;
    cursor: none;
    border-radius: 0 8px 8px 0;
    transition: all 0.2s;
    white-space: nowrap;
    display: flex; align-items: center; gap: 8px;
  }
  .analyze-btn:hover { background: var(--gold-light); }

  .analyzer-hints {
    display: flex;
    gap: 20px;
  }
  .hint {
    display: flex; align-items: center; gap: 6px;
    font-size: 0.74rem;
    color: rgba(212,204,184,0.4);
  }
  .hint-dot { width: 5px; height: 5px; border-radius: 50%; background: var(--green); }

  /* RESULT CARD */
  .result-card {
    background: var(--dark-2);
    border: 1px solid rgba(201,168,76,0.15);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 28px;
    animation: fadeUp 0.5s ease both;
  }

  .result-header {
    padding: 20px 24px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(201,168,76,0.04);
  }
  .result-property { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem; }
  .result-meta { font-size: 0.78rem; color: var(--cream-dim); margin-top: 2px; }
  .result-score {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
  }
  .score-num {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    color: var(--red);
    line-height: 1;
  }
  .score-num.good { color: var(--green); }
  .score-num.mid { color: var(--gold); }
  .score-sub { font-size: 0.65rem; color: var(--cream-dim); text-transform: uppercase; letter-spacing: 0.08em; }

  .result-body {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1px;
    background: rgba(255,255,255,0.04);
  }
  .result-cell {
    background: var(--dark-2);
    padding: 20px 24px;
  }
  .cell-label { font-size: 0.68rem; text-transform: uppercase; letter-spacing: 0.1em; color: rgba(212,204,184,0.4); margin-bottom: 8px; }
  .cell-value { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1.2rem; }
  .cell-value.green { color: var(--green); }
  .cell-value.red { color: var(--red); }
  .cell-value.gold { color: var(--gold); }
  .cell-sub { font-size: 0.74rem; color: var(--cream-dim); margin-top: 3px; }

  .result-insights {
    padding: 20px 24px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .insight-row {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 14px;
    border-radius: 8px;
    font-size: 0.84rem;
    line-height: 1.5;
  }
  .insight-row.warn { background: var(--red-dim); border: 1px solid rgba(232,76,76,0.15); }
  .insight-row.ok { background: var(--green-dim); border: 1px solid rgba(46,204,138,0.15); }
  .insight-row.info { background: var(--blue-dim); border: 1px solid rgba(76,122,201,0.15); }
  .insight-row.neutral { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06); }
  .insight-icon { font-size: 0.9rem; flex-shrink: 0; margin-top: 1px; }
  .insight-text { color: var(--cream-dim); }
  .insight-text strong { color: var(--cream); font-weight: 500; }

  .result-footer {
    padding: 16px 24px;
    border-top: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .verdict {
    display: flex; align-items: center; gap: 8px;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.82rem;
  }
  .verdict-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--red); }
  .verdict-dot.ok { background: var(--green); }
  .result-actions { display: flex; gap: 8px; }
  .action-btn {
    padding: 8px 16px;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 6px;
    background: none;
    color: var(--cream-dim);
    font-size: 0.78rem;
    cursor: none;
    transition: all 0.2s;
    font-family: 'DM Sans', sans-serif;
  }
  .action-btn:hover { border-color: rgba(201,168,76,0.3); color: var(--cream); }
  .action-btn.primary { background: var(--gold-dim); border-color: rgba(201,168,76,0.3); color: var(--gold); }

  /* STATS GRID */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-bottom: 28px;
  }
  .stat-card {
    background: var(--dark-3);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 12px;
    padding: 20px;
    transition: border-color 0.2s;
  }
  .stat-card:hover { border-color: rgba(201,168,76,0.2); }
  .stat-card-label { font-size: 0.68rem; text-transform: uppercase; letter-spacing: 0.1em; color: rgba(212,204,184,0.4); margin-bottom: 10px; }
  .stat-card-value { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.8rem; line-height: 1; }
  .stat-card-sub { font-size: 0.74rem; color: var(--cream-dim); margin-top: 4px; }
  .stat-trend { display: inline-flex; align-items: center; gap: 4px; font-size: 0.72rem; margin-top: 8px; }
  .stat-trend.up { color: var(--green); }
  .stat-trend.down { color: var(--red); }

  /* BOTTOM GRID */
  .bottom-grid {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 16px;
  }

  .panel {
    background: var(--dark-3);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 12px;
    overflow: hidden;
  }
  .panel-header {
    padding: 18px 22px;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .panel-title { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.9rem; }
  .panel-action { font-size: 0.74rem; color: var(--gold); cursor: none; text-decoration: none; }

  /* HISTORY TABLE */
  .history-table { width: 100%; border-collapse: collapse; }
  .history-table th {
    padding: 10px 22px;
    text-align: left;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: rgba(212,204,184,0.3);
    border-bottom: 1px solid rgba(255,255,255,0.04);
    font-weight: 400;
  }
  .history-table td {
    padding: 13px 22px;
    font-size: 0.82rem;
    border-bottom: 1px solid rgba(255,255,255,0.03);
    color: var(--cream-dim);
  }
  .history-table tr:last-child td { border-bottom: none; }
  .history-table tr:hover td { background: rgba(255,255,255,0.02); }
  .prop-name { color: var(--cream); font-weight: 500; font-size: 0.84rem; }
  .score-pill {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 100px;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 0.72rem;
  }
  .score-pill.bad { background: var(--red-dim); color: var(--red); }
  .score-pill.good { background: var(--green-dim); color: var(--green); }
  .score-pill.mid { background: rgba(201,168,76,0.12); color: var(--gold); }

  /* ALERTS PANEL */
  .alert-item {
    padding: 14px 20px;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    cursor: none;
    transition: background 0.2s;
  }
  .alert-item:last-child { border-bottom: none; }
  .alert-item:hover { background: rgba(255,255,255,0.02); }
  .alert-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 4px; }
  .alert-name { font-size: 0.82rem; font-weight: 500; color: var(--cream); }
  .alert-time { font-size: 0.68rem; color: rgba(212,204,184,0.3); }
  .alert-desc { font-size: 0.76rem; color: var(--cream-dim); line-height: 1.4; }
  .alert-tag {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.62rem;
    font-weight: 600;
    margin-top: 6px;
    font-family: 'Syne', sans-serif;
  }
  .alert-tag.new { background: var(--green-dim); color: var(--green); }
  .alert-tag.drop { background: var(--red-dim); color: var(--red); }
  .alert-tag.hot { background: rgba(201,168,76,0.12); color: var(--gold); }

  /* LOADING STATE */
  .loading-state {
    display: none;
    align-items: center;
    justify-content: center;
    padding: 40px;
    gap: 12px;
    color: var(--cream-dim);
    font-size: 0.88rem;
  }
  .spinner {
    width: 20px; height: 20px;
    border: 2px solid rgba(201,168,76,0.2);
    border-top-color: var(--gold);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }
  @keyframes fadeUp {
    from { opacity:0; transform:translateY(20px); }
    to { opacity:1; transform:translateY(0); }
  }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }

  /* EMPTY STATE */
  .empty-state {
    text-align: center;
    padding: 48px 24px;
    color: rgba(212,204,184,0.3);
  }
  .empty-icon { font-size: 2.5rem; margin-bottom: 12px; }
  .empty-text { font-size: 0.85rem; }

  /* ‚îÄ‚îÄ MOBILE RESPONSIVE ‚îÄ‚îÄ */
  .mobile-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:49;backdrop-filter:blur(4px);}
  .burger{display:none;flex-direction:column;gap:5px;cursor:none;padding:8px;background:var(--dark-3);border:1px solid rgba(255,255,255,0.08);border-radius:8px;}
  .burger span{display:block;width:20px;height:2px;background:var(--cream);border-radius:2px;transition:all 0.3s;}
  .burger.open span:nth-child(1){transform:translateY(7px) rotate(45deg);}
  .burger.open span:nth-child(2){opacity:0;}
  .burger.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg);}

  @media(max-width:900px){
    .sidebar{transform:translateX(-100%);transition:transform 0.3s ease;box-shadow:none;}
    .sidebar.open{transform:translateX(0);box-shadow:8px 0 40px rgba(0,0,0,0.5);}
    .mobile-overlay.show{display:block;}
    .main{margin-left:0 !important;}
    .burger{display:flex;}
    .content{padding:20px 16px !important;}
    .topbar{padding:14px 16px !important;}
    /* Stack grids on mobile */
    .stats-grid,.summary-grid,.hero-stats{grid-template-columns:1fr 1fr !important;}
    .bottom-grid,.main-grid,.comparison,.bottom-row{grid-template-columns:1fr !important;}
    .calc-layout,.settings-layout{grid-template-columns:1fr !important;}
    .district-grid{grid-template-columns:1fr 1fr !important;}
    .forecast-grid{grid-template-columns:1fr 1fr !important;}
    .alert-form{grid-template-columns:1fr 1fr !important;}
    .alert-main{grid-template-columns:auto 1fr !important;}
    .alert-stats,.alert-actions{display:none !important;}
    .plans-grid{grid-template-columns:1fr !important;}
    .chart-header{flex-direction:column !important;gap:12px !important;}
    .url-row,.url-input-wrap{flex-wrap:wrap !important;}
    .url-inp,.url-input{border-right:1px solid rgba(201,168,76,0.15) !important;border-radius:8px !important;margin-bottom:8px !important;width:100% !important;}
    .scan-btn,.analyze-btn{border-radius:8px !important;width:100% !important;justify-content:center !important;}
    .infra-grid{grid-template-columns:repeat(3,1fr) !important;}
    .chips-wrap{padding-bottom:8px !important;}
  }
  @media(max-width:500px){
    .stats-grid,.summary-grid,.hero-stats{grid-template-columns:1fr !important;}
    .district-grid,.forecast-grid{grid-template-columns:1fr !important;}
    .score-overview{grid-template-columns:1fr !important;}
    .score-main{border-right:none !important;border-bottom:1px solid rgba(255,255,255,0.05) !important;}
    .checks-grid{grid-template-columns:1fr !important;}
  }

  /* ‚îÄ‚îÄ PAGE TRANSITIONS ‚îÄ‚îÄ */
  body{opacity:0;animation:pageIn 0.35s ease forwards;}
  @keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  .page-exit{animation:pageOut 0.25s ease forwards !important;}
  @keyframes pageOut{to{opacity:0;transform:translateY(-8px)}}
</style>

  <!-- ImotIQ Config -->
  <script>
    const IMOTIQ_CONFIG = {
      BACKEND_URL: 'https://script.google.com/macros/s/AKfycby2wvhmQgz3WLUq-F0zJRq6Cr6cuipgZIJLAIkSE5tdgN9OqRpmlKALBZNuIawzpKzBVQ/exec',
      VERSION: '1.0',
    };

    // ‚îÄ‚îÄ API HELPER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function apiCall(action, data = {}) {
      try {
        const res = await fetch(IMOTIQ_CONFIG.BACKEND_URL, {
          method: 'POST',
          body: JSON.stringify({ action, ...data }),
        });
        return await res.json();
      } catch(e) {
        console.error('API error:', e);
        return { success: false, error: e.message };
      }
    }

    // ‚îÄ‚îÄ SESSION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    function getSession() { return localStorage.getItem('imotiq_session'); }
    function getUser()    { return JSON.parse(localStorage.getItem('imotiq_user') || 'null'); }

    function checkSession() {
      if(!getSession() && !window.location.href.includes('landing')) {
        window.location.href = 'imotiq-landing.html';
      }
    }

    // ‚îÄ‚îÄ LOGOUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    async function logout() {
      await apiCall('logout', { sessionId: getSession() });
      localStorage.clear();
      window.location.href = 'imotiq-landing.html';
    }
  </script>

</head>
<body>

<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>

<!-- SIDEBAR -->
<aside class="sidebar">
  <div class="sidebar-logo">Imot<span>IQ</span></div>
  <div style="padding:12px 8px 0;">
    <div class="sidebar-section">–ì–ª–∞–≤–Ω–æ</div>
    <a class="nav-item active" href="imotiq-dashboard.html"><span class="nav-icon">‚ö°</span> Dashboard</a>
    <a class="nav-item" href="imotiq-dashboard.html"><span class="nav-icon">üß†</span> AI –ê–Ω–∞–ª–∏–∑</a>
    <a class="nav-item" href="imotiq-alerts.html"><span class="nav-icon">üîî</span> –ú–æ–∏—Ç–µ Alerts<span class="nav-badge">3</span></a>

    <div class="sidebar-section">–ü–∞–∑–∞—Ä</div>
    <a class="nav-item" href="imotiq-tracker.html"><span class="nav-icon">üìä</span> –ö–≤–∞—Ä—Ç–∞–ª–µ–Ω –¢—Ä–µ–∫–µ—Ä</a>
    <a class="nav-item" href="imotiq-trend.html"><span class="nav-icon">üìà</span> –¶–µ–Ω–æ–≤–∏ –¢—Ä–µ–Ω–¥</a>
    <a class="nav-item" href="imotiq-report.html"><span class="nav-icon">üèòÔ∏è</span> –ö–≤–∞—Ä—Ç–∞–ª–µ–Ω –î–æ–∫–ª–∞–¥</a>

    <div class="sidebar-section">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</div>
    <a class="nav-item" href="imotiq-calculator.html"><span class="nav-icon">‚öñÔ∏è</span> –ù–∞–µ–º vs –ö—É–ø—É–≤–∞–Ω–µ</a>
    <a class="nav-item" href="imotiq-detector.html"><span class="nav-icon">üîç</span> –§–∞–ª—à–∏–≤–∏ –û–±—è–≤–∏</a>
    <a class="nav-item" href="imotiq-history.html"><span class="nav-icon">üìã</span> –ò—Å—Ç–æ—Ä–∏—è</a>

    <div class="sidebar-section">–ê–∫–∞—É–Ω—Ç</div>
    <a class="nav-item" href="imotiq-settings.html"><span class="nav-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
  </div>
  <div class="sidebar-bottom">
    <div class="plan-widget">
      <div class="plan-name">üÜì –ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω</div>
      <div class="plan-usage">1 –æ—Ç 1 –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω</div>
      <div class="usage-bar"><div class="usage-fill" style="width:100%"></div></div>
      <a href="#" class="upgrade-btn">–ù–∞–¥–≥—Ä–∞–¥–∏ –∫—ä–º –°—Ç–∞–Ω–¥–∞—Ä—Ç ‚Üí</a>
    </div>
    <div class="user-row">
      <div class="avatar">–ò–ò</div>
      <div>
        <div class="user-name">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
        <div class="user-plan">–ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω</div>
      </div>
      <button class="logout-btn" title="–ò–∑—Ö–æ–¥">‚èª</button>
    </div>
  </div>
</aside>

<!-- MAIN -->
<main class="main">
  <!-- TOPBAR -->
  <div class="topbar">
    <div class="page-title">Dashboard</div>
    <div class="topbar-right">
      <div class="topbar-date" id="currentDate"></div>
      <div class="notif-btn">
        üîî
        <div class="notif-dot"></div>
      </div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- STATS -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-card-label">–ê–Ω–∞–ª–∏–∑–∏ –Ω–∞–ø—Ä–∞–≤–µ–Ω–∏</div>
        <div class="stat-card-value">1</div>
        <div class="stat-card-sub">–æ—Ç 1 –±–µ–∑–ø–ª–∞—Ç–Ω–∏</div>
        <div class="stat-trend down">‚Üì –õ–∏–º–∏—Ç—ä—Ç –µ –¥–æ—Å—Ç–∏–≥–Ω–∞—Ç</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-label">–°—Ä–µ–¥–Ω–∞ —Ü–µ–Ω–∞ –õ–æ–∑–µ–Ω–µ—Ü</div>
        <div class="stat-card-value" style="color:var(--gold)">3,240</div>
        <div class="stat-card-sub">–ª–≤/–º¬≤ —Ç–∞–∑–∏ —Å–µ–¥–º–∏—Ü–∞</div>
        <div class="stat-trend up">‚Üë +2.1% –æ—Ç –º–∏–Ω–∞–ª–∏—è –º–µ—Å–µ—Ü</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-label">–ù–æ–≤–∏ –æ–±—è–≤–∏ –¥–Ω–µ—Å</div>
        <div class="stat-card-value">47</div>
        <div class="stat-card-sub">–≤ —Å–ª–µ–¥–µ–Ω–∏ –∫–≤–∞—Ä—Ç–∞–ª–∏</div>
        <div class="stat-trend up">‚Üë 3 –ø–æ–¥ –ø–∞–∑–∞—Ä–Ω–∞ —Ü–µ–Ω–∞</div>
      </div>
      <div class="stat-card">
        <div class="stat-card-label">–ê–∫—Ç–∏–≤–Ω–∏ Alerts</div>
        <div class="stat-card-value">3</div>
        <div class="stat-card-sub">–ø–æ —Ç–≤–æ–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏</div>
        <div class="stat-trend up" style="color:var(--gold)">‚ú¶ 1 –Ω–æ–≤ –æ—Ç –≤—á–µ—Ä–∞</div>
      </div>
    </div>

    <!-- ANALYZER -->
    <div class="analyzer-section">
      <div class="analyzer-bg"></div>
      <div class="analyzer-label">AI –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</div>
      <div class="analyzer-title">–ü–æ—Å—Ç–∞–≤–∏ –ª–∏–Ω–∫ –æ—Ç Imot.bg –∏–ª–∏ OLX</div>
      <div class="url-input-wrap">
        <div class="url-prefix">üîó URL</div>
        <input class="url-input" id="urlInput" type="text" placeholder="https://www.imot.bg/pcgi/imot.cgi?act=5&adv=...">
        <button class="analyze-btn" onclick="runAnalysis()">
          <span id="btnText">–ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π</span>
          <span id="btnIcon">‚Üí</span>
        </button>
      </div>
      <div class="analyzer-hints">
        <div class="hint"><div class="hint-dot"></div> –†–∞–±–æ—Ç–∏ —Å Imot.bg</div>
        <div class="hint"><div class="hint-dot"></div> –†–∞–±–æ—Ç–∏ —Å OLX.bg</div>
        <div class="hint"><div class="hint-dot" style="background:var(--gold)"></div> 1 –±–µ–∑–ø–ª–∞—Ç–µ–Ω –∞–Ω–∞–ª–∏–∑/–º–µ—Å–µ—Ü</div>
      </div>
    </div>

    <!-- LOADING -->
    <div class="loading-state" id="loadingState" style="display:none">
      <div class="spinner"></div>
      <span>AI –∞–Ω–∞–ª–∏–∑–∏—Ä–∞ –æ–±—è–≤–∞—Ç–∞...</span>
    </div>

    <!-- RESULT (shown after analysis) -->
    <div class="result-card" id="resultCard" style="display:none">
      <div class="result-header">
        <div>
          <div class="result-property">üè† –õ–æ–∑–µ–Ω–µ—Ü, 3-—Å—Ç–∞–µ–Ω –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç</div>
          <div class="result-meta">95 –º¬≤ ¬∑ Imot.bg ¬∑ –ê–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω –ø—Ä–µ–¥–∏ –º–∞–ª–∫–æ</div>
        </div>
        <div class="result-score">
          <div class="score-num">4.2</div>
          <div class="score-sub">–û—Ü–µ–Ω–∫–∞ /10</div>
        </div>
      </div>

      <div class="result-body">
        <div class="result-cell">
          <div class="cell-label">–û–±—è–≤–µ–Ω–∞ —Ü–µ–Ω–∞</div>
          <div class="cell-value">285,000 –ª–≤</div>
          <div class="cell-sub">‚âà 3,000 –ª–≤/–º¬≤</div>
        </div>
        <div class="result-cell">
          <div class="cell-label">–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞ —Ü–µ–Ω–∞</div>
          <div class="cell-value green">238,000 –ª–≤</div>
          <div class="cell-sub">‚âà 2,505 –ª–≤/–º¬≤</div>
        </div>
        <div class="result-cell">
          <div class="cell-label">–ù–∞–¥—Ü–µ–Ω–µ–Ω–∞ —Å</div>
          <div class="cell-value red">+19.7%</div>
          <div class="cell-sub">–ü—Ä–µ–ø–æ—Ä—ä—á–≤–∞–º–µ –ø—Ä–µ–≥–æ–≤–æ—Ä–∏</div>
        </div>
      </div>

      <div class="result-insights">
        <div class="insight-row warn">
          <span class="insight-icon">‚ö†Ô∏è</span>
          <div class="insight-text"><strong>–ù–∞–¥—Ü–µ–Ω–µ–Ω–∞ —Å 19% —Å–ø—Ä—è–º–æ —Å—Ä–µ–¥–Ω–æ—Ç–æ –∑–∞ –∫–≤–∞—Ä—Ç–∞–ª–∞.</strong> –ó–∞ –õ–æ–∑–µ–Ω–µ—Ü —Å—Ä–µ–¥–Ω–∞—Ç–∞ —Ü–µ–Ω–∞ –µ 2,505 –ª–≤/–º¬≤, —Ç–∞–∑–∏ –æ–±—è–≤–∞ –∏—Å–∫–∞ 3,000 –ª–≤/–º¬≤.</div>
        </div>
        <div class="insight-row warn">
          <span class="insight-icon">üïê</span>
          <div class="insight-text"><strong>–û–±—è–≤–∞—Ç–∞ –µ –∞–∫—Ç–∏–≤–Ω–∞ 6 –º–µ—Å–µ—Ü–∞.</strong> –ü—Ä–æ–¥–∞–≤–∞—á—ä—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ –µ –º–æ—Ç–∏–≤–∏—Ä–∞–Ω ‚Äî –¥–æ–±—Ä–æ –º—è—Å—Ç–æ –∑–∞ –ø—Ä–µ–≥–æ–≤–æ—Ä–∏ –∑–∞ 10-15% –Ω–∞–º–∞–ª–µ–Ω–∏–µ.</div>
        </div>
        <div class="insight-row ok">
          <span class="insight-icon">‚úÖ</span>
          <div class="insight-text"><strong>–°–Ω–∏–º–∫–∏—Ç–µ —Å–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏.</strong> –ù–µ –æ—Ç–∫—Ä–∏—Ö–º–µ –∫–æ–ø–∏—Ä–∞–Ω–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏ –æ–±—è–≤–∏ –∏–ª–∏ —Å—Ç–æ–∫–æ–≤–∏ —Å–Ω–∏–º–∫–∏.</div>
        </div>
        <div class="insight-row ok">
          <span class="insight-icon">‚úÖ</span>
          <div class="insight-text"><strong>–¢–µ–ª–µ—Ñ–æ–Ω—ä—Ç –µ —Å–≤—ä—Ä–∑–∞–Ω —Å–∞–º–æ —Å —Ç–∞–∑–∏ –æ–±—è–≤–∞.</strong> –ë–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –∑–∞ –∏–∑–º–∞–º–∞ –∏–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—ä–º–Ω–∏—Ç–µ–ª–Ω–∏ –æ–±—è–≤–∏.</div>
        </div>
        <div class="insight-row info">
          <span class="insight-icon">üìà</span>
          <div class="insight-text"><strong>–ö–≤–∞—Ä—Ç–∞–ª—ä—Ç —Ä–∞—Å—Ç–µ —Å 4.2% –Ω–∞ —Ç—Ä–∏–º–µ—Å–µ—á–∏–µ.</strong> –õ–æ–∑–µ–Ω–µ—Ü –µ —Å—Ç–∞–±–∏–ª–µ–Ω –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–µ–Ω –∏–∑–±–æ—Ä —Å –¥–æ–±—Ä–∞ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç.</div>
        </div>
        <div class="insight-row neutral">
          <span class="insight-icon">üí°</span>
          <div class="insight-text"><strong>–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:</strong> –ù–∞–ø—Ä–∞–≤–∏ –æ—Ñ–µ—Ä—Ç–∞ –æ—Ç 240,000 –ª–≤. –ò–º–∞—à —Å–∏–ª–Ω–∞ –ø—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –∑–∞—Ä–∞–¥–∏ –ø—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –æ–±—è–≤–∞—Ç–∞.</div>
        </div>
      </div>

      <div class="result-footer">
        <div class="verdict">
          <div class="verdict-dot"></div>
          –ù–∞–¥—Ü–µ–Ω–µ–Ω–∞ ‚Äî –ü—Ä–µ–≥–æ–≤–∞—Ä—è–π –∞–≥—Ä–µ—Å–∏–≤–Ω–æ
        </div>
        <div class="result-actions">
          <button class="action-btn">üì• –ó–∞–ø–∞–∑–∏</button>
          <button class="action-btn">üì§ –°–ø–æ–¥–µ–ª–∏</button>
          <button class="action-btn primary">üìÑ PDF –†–µ–ø–æ—Ä—Ç</button>
        </div>
      </div>
    </div>

    <!-- BOTTOM GRID -->
    <div class="bottom-grid">
      <!-- HISTORY -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">üìã –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –∞–Ω–∞–ª–∏–∑–∏—Ç–µ</div>
          <a href="#" class="panel-action">–í–∏–∂ –≤—Å–∏—á–∫–∏</a>
        </div>
        <table class="history-table">
          <thead>
            <tr>
              <th>–ò–º–æ—Ç</th>
              <th>–û—Ü–µ–Ω–∫–∞</th>
              <th>–¶–µ–Ω–∞</th>
              <th>–î–∞—Ç–∞</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <div class="prop-name">–õ–æ–∑–µ–Ω–µ—Ü, 3-—Å—Ç–∞–µ–Ω</div>
                <div style="font-size:0.72rem;color:rgba(212,204,184,0.3)">95 –º¬≤</div>
              </td>
              <td><span class="score-pill bad">4.2 / 10</span></td>
              <td>285,000 –ª–≤</td>
              <td>–î–Ω–µ—Å</td>
            </tr>
            <tr>
              <td>
                <div class="prop-name">–ú–ª–∞–¥–æ—Å—Ç 1, 2-—Å—Ç–∞–µ–Ω</div>
                <div style="font-size:0.72rem;color:rgba(212,204,184,0.3)">68 –º¬≤</div>
              </td>
              <td><span class="score-pill good">8.1 / 10</span></td>
              <td>142,000 –ª–≤</td>
              <td>–í—á–µ—Ä–∞</td>
            </tr>
            <tr>
              <td>
                <div class="prop-name">–í–∏—Ç–æ—à–∞, –°—Ç—É–¥–∏–æ</div>
                <div style="font-size:0.72rem;color:rgba(212,204,184,0.3)">42 –º¬≤</div>
              </td>
              <td><span class="score-pill mid">6.5 / 10</span></td>
              <td>89,000 –ª–≤</td>
              <td>3 –¥–Ω–∏</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- ALERTS -->
      <div class="panel">
        <div class="panel-header">
          <div class="panel-title">üîî –ü–æ—Å–ª–µ–¥–Ω–∏ Alerts</div>
          <a href="#" class="panel-action">–£–ø—Ä–∞–≤–ª—è–≤–∞–π</a>
        </div>
        <div class="alert-item">
          <div class="alert-top">
            <div class="alert-name">–õ–æ–∑–µ–Ω–µ—Ü, –¥–æ 300K</div>
            <div class="alert-time">–ü—Ä–µ–¥–∏ 2—á</div>
          </div>
          <div class="alert-desc">–ù–æ–≤–∞ –æ–±—è–≤–∞ ‚Äî 3-—Å—Ç–∞–µ–Ω, 92–º¬≤, 12% –ø–æ–¥ —Å—Ä–µ–¥–Ω–æ—Ç–æ</div>
          <span class="alert-tag hot">üî• –ì–æ—Ä–µ—â–æ</span>
        </div>
        <div class="alert-item">
          <div class="alert-top">
            <div class="alert-name">–ú–ª–∞–¥–æ—Å—Ç 1, 2-—Å—Ç–∞–µ–Ω</div>
            <div class="alert-time">–ü—Ä–µ–¥–∏ 5—á</div>
          </div>
          <div class="alert-desc">–¶–µ–Ω–∞—Ç–∞ –Ω–∞–º–∞–ª–µ–Ω–∞ —Å 8,000 –ª–≤ –æ—Ç –≤—á–µ—Ä–∞</div>
          <span class="alert-tag drop">üìâ –°–ø–∞–¥ –≤ —Ü–µ–Ω–∞</span>
        </div>
        <div class="alert-item">
          <div class="alert-top">
            <div class="alert-name">–í–∏—Ç–æ—à–∞, –°—Ç—É–¥–∏–æ</div>
            <div class="alert-time">–í—á–µ—Ä–∞</div>
          </div>
          <div class="alert-desc">–ù–æ–≤–∞ –æ–±—è–≤–∞ –≤ —Å–ª–µ–¥–µ–Ω –∫–≤–∞—Ä—Ç–∞–ª, 2% –ø–æ–¥ –ø–∞–∑–∞—Ä–∞</div>
          <span class="alert-tag new">‚ú® –ù–æ–≤–æ</span>
        </div>
        <div style="padding:14px 20px;text-align:center;">
          <a href="#" style="font-size:0.78rem;color:var(--gold);text-decoration:none;">+ –î–æ–±–∞–≤–∏ –Ω–æ–≤ Alert</a>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
  // Date
  const d = new Date();
  document.getElementById('currentDate').textContent = d.toLocaleDateString('bg-BG', {weekday:'long', day:'numeric', month:'long'});

  // Analysis simulation
  async function runAnalysis() {
    const url = document.getElementById('urlInput').value.trim();
    if (!url) {
      document.getElementById('urlInput').style.borderColor = 'rgba(232,76,76,0.5)';
      setTimeout(() => document.getElementById('urlInput').style.borderColor = 'rgba(201,168,76,0.15)', 1500);
      return;
    }

    // Show loading
    document.getElementById('resultCard').style.display = 'none';
    document.getElementById('loadingState').style.display = 'flex';
    document.getElementById('btnText').textContent = '–ê–Ω–∞–ª–∏–∑–∏—Ä–∞...';
    document.getElementById('btnIcon').textContent = '‚è≥';

    // Real API call
    const result = await apiCall('analyze', {
      sessionId: getSession(),
      url: url,
    });

    document.getElementById('loadingState').style.display = 'none';
    document.getElementById('btnText').textContent = '–ê–Ω–∞–ª–∏–∑–∏—Ä–∞–π';
    document.getElementById('btnIcon').textContent = '‚Üí';

    if (!result.success) {
      if (result.error === 'limit_reached') {
        document.getElementById('resultCard').style.display = 'block';
        document.getElementById('resultCard').innerHTML = `
          <div style="padding:32px;text-align:center">
            <div style="font-size:2.5rem;margin-bottom:12px">üîí</div>
            <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;margin-bottom:8px">–î–æ—Å—Ç–∏–≥–Ω–∞—Ç –º–µ—Å–µ—á–µ–Ω –ª–∏–º–∏—Ç</div>
            <div style="font-size:0.84rem;color:var(--cream-dim);margin-bottom:20px">–ë–µ–∑–ø–ª–∞—Ç–Ω–∏—è—Ç –ø–ª–∞–Ω –ø–æ–∑–≤–æ–ª—è–≤–∞ 1 –∞–Ω–∞–ª–∏–∑ –Ω–∞ –º–µ—Å–µ—Ü</div>
            <a href="imotiq-settings.html" style="background:var(--gold);color:var(--dark);padding:12px 28px;border-radius:8px;font-family:'Syne',sans-serif;font-weight:700;text-decoration:none;display:inline-block">–ù–∞–¥–≥—Ä–∞–¥–∏ –ø–ª–∞–Ω–∞ ‚Üí</a>
          </div>`;
      } else {
        alert(result.message || '–ì—Ä–µ—à–∫–∞ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–∞. –ü—Ä–æ–≤–µ—Ä–∏ URL-–∞ –∏ –æ–ø–∏—Ç–∞–π –æ—Ç–Ω–æ–≤–æ.');
      }
      return;
    }

    // –ü–æ–ø—ä–ª–Ω–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ —Å —Ä–µ–∞–ª–Ω–∏ –¥–∞–Ω–Ω–∏
    const a = result.analysis;
    const l = result.listing;
    if (a) {
      const scoreEl = document.getElementById('aiScore');
      if (scoreEl) scoreEl.textContent = a.score ? a.score.toFixed(1) : '‚Äî';
      const verdictEl = document.querySelector('.result-verdict');
      if (verdictEl) verdictEl.textContent = a.verdict || '';
      const recEl = document.querySelector('.result-recommendation');
      if (recEl) recEl.textContent = a.recommendation || '';
    }

    document.getElementById('resultCard').style.display = 'block';
    document.getElementById('resultCard').scrollIntoView({ behavior: 'smooth', block: 'start' });
  }

  document.getElementById('urlInput').addEventListener('keydown', e => {
    if (e.key === 'Enter') runAnalysis();
  });

  // Custom cursor
  const cursor = document.getElementById('cursor');
  const ring = document.getElementById('cursorRing');
  let mx = 0, my = 0, rx = 0, ry = 0;
  document.addEventListener('mousemove', e => {
    mx = e.clientX; my = e.clientY;
    cursor.style.left = mx - 5 + 'px';
    cursor.style.top = my - 5 + 'px';
  });
  function animRing() {
    rx += (mx - rx - 16) * 0.12;
    ry += (my - ry - 16) * 0.12;
    ring.style.left = rx + 'px';
    ring.style.top = ry + 'px';
    requestAnimationFrame(animRing);
  }
  animRing();
  document.querySelectorAll('a, button, input').forEach(el => {
    el.addEventListener('mouseenter', () => cursor.style.transform = 'scale(2.5)');
    el.addEventListener('mouseleave', () => cursor.style.transform = 'scale(1)');
  });

  // MOBILE SIDEBAR
  function toggleSidebar(){
    document.querySelector('.sidebar').classList.toggle('open');
    document.getElementById('burgerBtn').classList.toggle('open');
    document.getElementById('mobileOverlay').classList.toggle('show');
  }
  function closeSidebar(){
    document.querySelector('.sidebar').classList.remove('open');
    document.getElementById('burgerBtn').classList.remove('open');
    document.getElementById('mobileOverlay').classList.remove('show');
  }
  // Close sidebar on nav click (mobile)
  document.querySelectorAll('.nav-item').forEach(a => a.addEventListener('click', closeSidebar));

</script>
</body>
</html>
