<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ImotIQ ‚Äî –ò—Å—Ç–æ—Ä–∏—è</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --gold:#C9A84C; --gold-light:#E8C97A; --gold-dim:rgba(201,168,76,0.12);
    --dark:#0A0A0F; --dark-2:#111118; --dark-3:#1A1A24;
    --cream:#F5F0E8; --cream-dim:#D4CCB8;
    --green:#2ECC8A; --green-dim:rgba(46,204,138,0.12);
    --red:#E84C4C; --red-dim:rgba(232,76,76,0.12);
    --blue:#4C7AC9; --blue-dim:rgba(76,122,201,0.12);
    --sidebar:260px;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{background:var(--dark);color:var(--cream);font-family:'DM Sans',sans-serif;display:flex;min-height:100vh;cursor:auto;}
  .cursor{width:10px;height:10px;background:var(--gold);border-radius:50%;position:fixed;pointer-events:none;z-index:9999;transition:transform 0.15s;mix-blend-mode:difference;}
  .cursor-ring{width:32px;height:32px;border:1px solid rgba(201,168,76,0.5);border-radius:50%;position:fixed;pointer-events:none;z-index:9998;transition:all 0.08s;}

  .sidebar{width:var(--sidebar);min-height:100vh;background:var(--dark-2);border-right:1px solid rgba(255,255,255,0.05);display:flex;flex-direction:column;position:fixed;top:0;left:0;bottom:0;z-index:50;}
  .sidebar-logo{padding:28px 24px 24px;border-bottom:1px solid rgba(255,255,255,0.05);font-family:'Syne',sans-serif;font-weight:800;font-size:1.4rem;}
  .sidebar-logo span{color:var(--gold);}
  .sidebar-section{padding:20px 16px 8px;font-size:0.62rem;text-transform:uppercase;letter-spacing:0.14em;color:rgba(212,204,184,0.3);}
  .nav-item{display:flex;align-items:center;gap:12px;padding:10px 16px;margin:2px 8px;border-radius:8px;cursor:auto;transition:all 0.2s;color:var(--cream-dim);font-size:0.88rem;text-decoration:none;position:relative;}
  .nav-item:hover{background:rgba(255,255,255,0.04);color:var(--cream);}
  .nav-item.active{background:var(--gold-dim);color:var(--gold);}
  .nav-item.active::before{content:'';position:absolute;left:-8px;top:50%;transform:translateY(-50%);width:3px;height:60%;background:var(--gold);border-radius:0 3px 3px 0;}
  .nav-icon{width:18px;font-size:1rem;text-align:center;}
  .nav-badge{margin-left:auto;background:var(--gold);color:var(--dark);font-size:0.6rem;font-weight:700;padding:2px 7px;border-radius:100px;font-family:'Syne',sans-serif;}
  .sidebar-bottom{margin-top:auto;padding:16px;border-top:1px solid rgba(255,255,255,0.05);}
  .plan-widget{background:var(--gold-dim);border:1px solid rgba(201,168,76,0.2);border-radius:10px;padding:14px;margin-bottom:12px;}
  .plan-name{font-family:'Syne',sans-serif;font-weight:700;font-size:0.75rem;color:var(--gold);margin-bottom:4px;}
  .plan-usage{font-size:0.72rem;color:var(--cream-dim);margin-bottom:8px;}
  .usage-bar{height:3px;background:rgba(255,255,255,0.08);border-radius:3px;overflow:hidden;}
  .usage-fill{height:100%;background:var(--gold);border-radius:3px;}
  .upgrade-btn{display:block;text-align:center;padding:8px;background:var(--gold);color:var(--dark);border-radius:6px;font-family:'Syne',sans-serif;font-weight:700;font-size:0.72rem;text-decoration:none;margin-top:10px;cursor:auto;}
  .upgrade-btn:hover{background:var(--gold-light);}
  .user-row{display:flex;align-items:center;gap:10px;}
  .avatar{width:34px;height:34px;background:linear-gradient(135deg,var(--gold),#8B6A1F);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:700;font-size:0.8rem;color:var(--dark);flex-shrink:0;}
  .user-name{font-size:0.82rem;font-weight:500;}
  .user-plan{font-size:0.7rem;color:var(--cream-dim);}
  .logout-btn{margin-left:auto;background:none;border:none;color:rgba(212,204,184,0.3);cursor:auto;font-size:0.8rem;}

  .main{margin-left:var(--sidebar);flex:1;display:flex;flex-direction:column;}
  .topbar{padding:20px 36px;border-bottom:1px solid rgba(255,255,255,0.05);display:flex;align-items:center;justify-content:space-between;background:var(--dark);position:sticky;top:0;z-index:40;}
  .page-title{font-family:'Syne',sans-serif;font-weight:700;font-size:1.1rem;}
  .notif-btn{width:36px;height:36px;background:var(--dark-3);border:1px solid rgba(255,255,255,0.06);border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:auto;font-size:1rem;position:relative;}
  .notif-dot{position:absolute;top:6px;right:6px;width:7px;height:7px;background:var(--gold);border-radius:50%;border:1.5px solid var(--dark);}
  .content{padding:32px 36px;flex:1;}

  /* SUMMARY */
  .summary-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:24px;}
  .sum-card{background:var(--dark-3);border:1px solid rgba(255,255,255,0.05);border-radius:12px;padding:18px 20px;}
  .sum-label{font-size:0.65rem;text-transform:uppercase;letter-spacing:0.1em;color:rgba(212,204,184,0.4);margin-bottom:8px;}
  .sum-val{font-family:'Syne',sans-serif;font-weight:800;font-size:1.6rem;line-height:1;}
  .sum-sub{font-size:0.72rem;color:var(--cream-dim);margin-top:4px;}

  /* FILTERS */
  .filters{display:flex;align-items:center;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
  .search-wrap{position:relative;flex:1;max-width:320px;}
  .search-icon{position:absolute;left:12px;top:50%;transform:translateY(-50%);font-size:0.9rem;color:rgba(212,204,184,0.35);}
  .search-input{width:100%;background:var(--dark-3);border:1px solid rgba(255,255,255,0.07);border-radius:8px;padding:9px 14px 9px 36px;color:var(--cream);font-family:'DM Sans',sans-serif;font-size:0.84rem;outline:none;transition:border-color 0.2s;}
  .search-input:focus{border-color:rgba(201,168,76,0.3);}
  .search-input::placeholder{color:rgba(212,204,184,0.25);}
  .filter-sel{background:var(--dark-3);border:1px solid rgba(255,255,255,0.07);border-radius:8px;padding:9px 14px;color:var(--cream-dim);font-family:'DM Sans',sans-serif;font-size:0.82rem;outline:none;cursor:auto;}
  .export-btn{margin-left:auto;background:var(--gold-dim);border:1px solid rgba(201,168,76,0.25);color:var(--gold);padding:9px 18px;border-radius:8px;font-family:'Syne',sans-serif;font-weight:600;font-size:0.78rem;cursor:auto;transition:all 0.2s;}
  .export-btn:hover{background:var(--gold);color:var(--dark);}

  /* TABLE */
  .table-wrap{background:var(--dark-3);border:1px solid rgba(255,255,255,0.06);border-radius:16px;overflow:hidden;}
  table{width:100%;border-collapse:collapse;}
  thead th{padding:12px 20px;text-align:left;font-size:0.65rem;text-transform:uppercase;letter-spacing:0.1em;color:rgba(212,204,184,0.3);border-bottom:1px solid rgba(255,255,255,0.05);font-weight:400;background:rgba(255,255,255,0.01);}
  tbody td{padding:14px 20px;border-bottom:1px solid rgba(255,255,255,0.03);vertical-align:middle;}
  tbody tr:last-child td{border-bottom:none;}
  tbody tr:hover td{background:rgba(255,255,255,0.02);}

  .prop-thumb{width:40px;height:40px;background:var(--dark-2);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0;}
  .prop-name{font-size:0.86rem;font-weight:500;margin-bottom:2px;}
  .prop-addr{font-size:0.72rem;color:var(--cream-dim);}

  .score-pill{display:inline-flex;align-items:center;gap:4px;padding:4px 10px;border-radius:100px;font-family:'Syne',sans-serif;font-weight:700;font-size:0.75rem;}
  .score-good{background:var(--green-dim);color:var(--green);}
  .score-mid{background:var(--gold-dim);color:var(--gold);}
  .score-bad{background:var(--red-dim);color:var(--red);}

  .verdict-tag{font-size:0.72rem;padding:3px 9px;border-radius:4px;font-family:'Syne',sans-serif;font-weight:600;}

  .price-col{font-family:'DM Mono',monospace;font-size:0.84rem;}
  .fair-col{font-family:'DM Mono',monospace;font-size:0.82rem;color:var(--green);}
  .diff-col{font-family:'Syne',sans-serif;font-weight:700;font-size:0.8rem;}

  .row-actions{display:flex;gap:6px;}
  .row-btn{padding:5px 12px;border-radius:5px;border:1px solid rgba(255,255,255,0.07);background:none;color:var(--cream-dim);font-size:0.72rem;cursor:auto;transition:all 0.2s;font-family:'DM Sans',sans-serif;}
  .row-btn:hover{border-color:rgba(201,168,76,0.3);color:var(--cream);}
  .row-btn.primary{background:var(--gold-dim);border-color:rgba(201,168,76,0.25);color:var(--gold);}

  /* PAGINATION */
  .pagination{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-top:1px solid rgba(255,255,255,0.05);}
  .page-info{font-size:0.76rem;color:var(--cream-dim);}
  .page-btns{display:flex;gap:4px;}
  .page-btn{width:32px;height:32px;border-radius:6px;border:1px solid rgba(255,255,255,0.07);background:none;color:var(--cream-dim);font-size:0.8rem;cursor:auto;transition:all 0.2s;display:flex;align-items:center;justify-content:center;}
  .page-btn.active{background:var(--gold-dim);border-color:rgba(201,168,76,0.3);color:var(--gold);}
  .page-btn:hover:not(.active){border-color:rgba(255,255,255,0.15);color:var(--cream);}

  @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
  .fade-in{animation:fadeUp 0.4s ease both;}

  /* ‚îÄ‚îÄ MOBILE RESPONSIVE ‚îÄ‚îÄ */
  .mobile-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:49;backdrop-filter:blur(4px);}
  .burger{display:none;flex-direction:column;gap:5px;cursor:auto;padding:8px;background:var(--dark-3);border:1px solid rgba(255,255,255,0.08);border-radius:8px;}
  .burger span{display:block;width:20px;height:2px;background:var(--cream);border-radius:2px;transition:all 0.3s;}
  .burger.open span:nth-child(1){transform:translateY(7px) rotate(45deg);}
  .burger.open span:nth-child(2){opacity:0;}
  .burger.open span:nth-child(3){transform:translateY(-7px) rotate(-45deg);}

  @media(max-width:900px){
    .sidebar{transform:translateX(-100%);transition:transform 0.3s ease;box-shadow:none;}
    .sidebar.open{transform:translateX(0);box-shadow:8px 0 40px rgba(0,0,0,0.5);}
    .mobile-overlay.show{display:block;}
    .main{margin-left:0 !important;}
    .burger{display:flex;}
    .content{padding:20px 16px !important;}
    .topbar{padding:14px 16px !important;}
    /* Stack grids on mobile */
    .stats-grid,.summary-grid,.hero-stats{grid-template-columns:1fr 1fr !important;}
    .bottom-grid,.main-grid,.comparison,.bottom-row{grid-template-columns:1fr !important;}
    .calc-layout,.settings-layout{grid-template-columns:1fr !important;}
    .district-grid{grid-template-columns:1fr 1fr !important;}
    .forecast-grid{grid-template-columns:1fr 1fr !important;}
    .alert-form{grid-template-columns:1fr 1fr !important;}
    .alert-main{grid-template-columns:auto 1fr !important;}
    .alert-stats,.alert-actions{display:none !important;}
    .plans-grid{grid-template-columns:1fr !important;}
    .chart-header{flex-direction:column !important;gap:12px !important;}
    .url-row,.url-input-wrap{flex-wrap:wrap !important;}
    .url-inp,.url-input{border-right:1px solid rgba(201,168,76,0.15) !important;border-radius:8px !important;margin-bottom:8px !important;width:100% !important;}
    .scan-btn,.analyze-btn{border-radius:8px !important;width:100% !important;justify-content:center !important;}
    .infra-grid{grid-template-columns:repeat(3,1fr) !important;}
    .chips-wrap{padding-bottom:8px !important;}
  }
  @media(max-width:500px){
    .stats-grid,.summary-grid,.hero-stats{grid-template-columns:1fr !important;}
    .district-grid,.forecast-grid{grid-template-columns:1fr !important;}
    .score-overview{grid-template-columns:1fr !important;}
    .score-main{border-right:none !important;border-bottom:1px solid rgba(255,255,255,0.05) !important;}
    .checks-grid{grid-template-columns:1fr !important;}
  }

  /* ‚îÄ‚îÄ PAGE TRANSITIONS ‚îÄ‚îÄ */
  body{opacity:0;animation:pageIn 0.35s ease forwards;}
  @keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
  .page-exit{animation:pageOut 0.25s ease forwards !important;}
  @keyframes pageOut{to{opacity:0;transform:translateY(-8px)}}

  /* ‚îÄ‚îÄ CURSOR FIX ‚îÄ‚îÄ */
  *, *::before, *::after { cursor: auto !important; }
  .cursor { cursor: auto !important; }
  @media (max-width: 900px) {
    *, *::before, *::after { cursor: auto !important; }
    .cursor, .cursor-ring { display: none !important; }
  }


  /* ‚îÄ‚îÄ SIDEBAR SCROLL FIX ‚îÄ‚îÄ */
  .sidebar {
    overflow-y: auto !important;
    overflow-x: hidden !important;
  }
  .sidebar::-webkit-scrollbar { width: 3px; }
  .sidebar::-webkit-scrollbar-track { background: transparent; }
  .sidebar::-webkit-scrollbar-thumb { background: rgba(201,168,76,0.2); border-radius: 3px; }
  .sidebar-bottom {
    position: sticky !important;
    bottom: 0 !important;
    background: var(--dark-2) !important;
    z-index: 2 !important;
    border-top: 1px solid rgba(255,255,255,0.05) !important;
  }


  /* ‚îÄ‚îÄ CURSOR OVERRIDE ‚îÄ‚îÄ */
  *, *::before, *::after { cursor: auto !important; }
  .cursor, .cursor-ring { display: none !important; }
  a, button, [onclick], select, input, label { cursor: pointer !important; }
</style>

  


  <!-- ImotIQ Dynamic Backend URL -->
  <script>
    var IMOTIQ_DEFAULT_URL = 'https://script.google.com/macros/s/AKfycbzPG2CXusx_ddMN0aXP7Ix_zL324it-oyD_DGjZhYpAq7pr4w8ehOwVS6hqux5qKHyd8A/exec';
    var IMOTIQ_BACKEND = localStorage.getItem('imotiq_backend_url') || IMOTIQ_DEFAULT_URL;

    async function apiCall(action, data) {
      data = data || {};
      try {
        var res = await fetch(IMOTIQ_BACKEND, {
          method: 'POST',
          body: JSON.stringify(Object.assign({action: action}, data)),
        });
        return await res.json();
      } catch(e) {
        console.error('API error:', e);
        return {success: false, error: e.message};
      }
    }

    function getSession() { return localStorage.getItem('imotiq_session'); }
    function getUser() { return JSON.parse(localStorage.getItem('imotiq_user') || 'null'); }

    async function logout() {
      await apiCall('logout', {sessionId: getSession()});
      var backendUrl = localStorage.getItem('imotiq_backend_url');
      localStorage.clear();
      if (backendUrl) localStorage.setItem('imotiq_backend_url', backendUrl);
      window.location.href = 'imotiq-landing.html';
    }
  </script>

</head>
<body>
<script>
    // ‚îÄ‚îÄ –ü–†–û–í–ï–†–ö–ê –ù–ê –°–ï–°–ò–Ø ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    (function() {
      var sess = localStorage.getItem('imotiq_session');
      var user = JSON.parse(localStorage.getItem('imotiq_user') || 'null');
      // –ê–∫–æ –Ω—è–º–∞ —Å–µ—Å–∏—è –∏–ª–∏ –µ —Ñ–∞–ª—à–∏–≤–∞—Ç–∞ —Ç–µ—Å—Ç–æ–≤–∞ ‚Äî –≤—ä—Ä–Ω–∏ –∫—ä–º landing
      if (!sess || !user || user.email === 'test@example.bg' || user.id === 'user_001') {
        localStorage.clear();
        window.location.replace('imotiq-landing.html');
      }
    })();
</script>
<div class="cursor" id="cursor"></div>
<div class="cursor-ring" id="cursorRing"></div>

<aside class="sidebar">
  <div class="sidebar-logo">Imot<span>IQ</span></div>
  <div style="padding:12px 8px 0;">
    <div class="sidebar-section">–ì–ª–∞–≤–Ω–æ</div>
    <a class="nav-item" href="imotiq-dashboard.html"><span class="nav-icon">‚ö°</span> Dashboard</a>
    <a class="nav-item" href="imotiq-dashboard.html"><span class="nav-icon">üß†</span> AI –ê–Ω–∞–ª–∏–∑</a>
    <a class="nav-item" href="imotiq-alerts.html"><span class="nav-icon">üîî</span> –ú–æ–∏—Ç–µ Alerts<span class="nav-badge">3</span></a>
    <div class="sidebar-section">–ü–∞–∑–∞—Ä</div>
    <a class="nav-item" href="imotiq-tracker.html"><span class="nav-icon">üìä</span> –ö–≤–∞—Ä—Ç–∞–ª–µ–Ω –¢—Ä–µ–∫–µ—Ä</a>
    <a class="nav-item" href="imotiq-trend.html"><span class="nav-icon">üìà</span> –¶–µ–Ω–æ–≤–∏ –¢—Ä–µ–Ω–¥</a>
    <a class="nav-item" href="imotiq-report.html"><span class="nav-icon">üèòÔ∏è</span> –ö–≤–∞—Ä—Ç–∞–ª–µ–Ω –î–æ–∫–ª–∞–¥</a>
    <div class="sidebar-section">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏</div>
    <a class="nav-item" href="imotiq-calculator.html"><span class="nav-icon">‚öñÔ∏è</span> –ù–∞–µ–º vs –ö—É–ø—É–≤–∞–Ω–µ</a>
    <a class="nav-item" href="imotiq-detector.html"><span class="nav-icon">üîç</span> –§–∞–ª—à–∏–≤–∏ –û–±—è–≤–∏</a>
    <a class="nav-item active" href="#"><span class="nav-icon">üìã</span> –ò—Å—Ç–æ—Ä–∏—è</a>
    <div class="sidebar-section">–ê–∫–∞—É–Ω—Ç</div>
    <a class="nav-item" href="imotiq-settings.html"><span class="nav-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
  </div>
  <div class="sidebar-bottom">
    <div class="plan-widget">
      <div class="plan-name">üÜì –ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω</div>
      <div class="plan-usage">1 –æ—Ç 1 –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω</div>
      <div class="usage-bar"><div class="usage-fill" style="width:100%"></div></div>
      <a href="imotiq-settings.html" class="upgrade-btn">–ù–∞–¥–≥—Ä–∞–¥–∏ –∫—ä–º –°—Ç–∞–Ω–¥–∞—Ä—Ç ‚Üí</a>
    </div>
    <div class="user-row">
      <div class="avatar">–ò–ò</div>
      <div><div class="user-name">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div><div class="user-plan">–ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω</div></div>
      <button class="logout-btn" onclick="logout()">‚èª</button>
    </div>
  </div>
</aside>

<main class="main">
  <div class="topbar">
    <div class="page-title">üìã –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –∞–Ω–∞–ª–∏–∑–∏—Ç–µ</div>
    <div style="display:flex;align-items:center;gap:12px;">
      <div style="font-size:0.78rem;color:var(--cream-dim)" id="currentDate"></div>
      <div class="notif-btn">üîî<div class="notif-dot"></div></div>
    </div>
  </div>

  <div class="content">

    <div class="summary-grid">
      <div class="sum-card fade-in">
        <div class="sum-label">–û–±—â–æ –∞–Ω–∞–ª–∏–∑–∏</div>
        <div class="sum-val">24</div>
        <div class="sum-sub">–æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ç–∞</div>
      </div>
      <div class="sum-card fade-in">
        <div class="sum-label">–û—Ç–∫—Ä–∏—Ç–∏ –Ω–∞–¥—Ü–µ–Ω–µ–Ω–∏</div>
        <div class="sum-val" style="color:var(--red)">14</div>
        <div class="sum-sub">58% –æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏—Ç–µ</div>
      </div>
      <div class="sum-card fade-in">
        <div class="sum-label">–°—Ä–µ–¥–Ω–æ –Ω–∞–¥—Ü–µ–Ω—è–≤–∞–Ω–µ</div>
        <div class="sum-val" style="color:var(--gold)">12.4%</div>
        <div class="sum-sub">—Å–ø—Ä—è–º–æ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞ —Ü–µ–Ω–∞</div>
      </div>
      <div class="sum-card fade-in">
        <div class="sum-label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª–Ω–æ —Å–ø–µ—Å—Ç–µ–Ω–∏</div>
        <div class="sum-val" style="color:var(--green)">23K</div>
        <div class="sum-sub">–ª–≤ –ø—Ä–∏ –ø—Ä–µ–≥–æ–≤–æ—Ä–∏</div>
      </div>
    </div>

    <div class="filters fade-in">
      <div class="search-wrap">
        <span class="search-icon">üîç</span>
        <input class="search-input" placeholder="–¢—ä—Ä—Å–∏ –ø–æ –∞–¥—Ä–µ—Å –∏–ª–∏ –∫–≤–∞—Ä—Ç–∞–ª..." oninput="filterTable(this.value)">
      </div>
      <select class="filter-sel" onchange="filterTable()">
        <option>–í—Å–∏—á–∫–∏ —Ç–∏–ø–æ–≤–µ</option>
        <option>–ù–∞–¥—Ü–µ–Ω–µ–Ω–∏</option>
        <option>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞ —Ü–µ–Ω–∞</option>
        <option>–ü–æ–¥—Ü–µ–Ω–µ–Ω–∏</option>
      </select>
      <select class="filter-sel">
        <option>–í—Å–∏—á–∫–∏ –∫–≤–∞—Ä—Ç–∞–ª–∏</option>
        <option>–õ–æ–∑–µ–Ω–µ—Ü</option>
        <option>–ú–ª–∞–¥–æ—Å—Ç</option>
        <option>–í–∏—Ç–æ—à–∞</option>
      </select>
      <select class="filter-sel">
        <option>–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 30 –¥–Ω–∏</option>
        <option>–ü–æ—Å–ª–µ–¥–Ω–∏—Ç–µ 3 –º–µ—Å–µ—Ü–∞</option>
        <option>–¶—è–ª–∞—Ç–∞ –∏—Å—Ç–æ—Ä–∏—è</option>
      </select>
      <button class="export-btn">üì• –ï–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π CSV</button>
    </div>

    <div class="table-wrap fade-in">
      <table id="historyTable">
        <thead>
          <tr>
            <th>–ò–º–æ—Ç</th>
            <th>–î–∞—Ç–∞</th>
            <th>AI –°–∫–æ—Ä</th>
            <th>–û–±—è–≤–µ–Ω–∞ —Ü–µ–Ω–∞</th>
            <th>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞ —Ü–µ–Ω–∞</th>
            <th>–†–∞–∑–ª–∏–∫–∞</th>
            <th>Verdict</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody id="tableBody">
        </tbody>
      </table>
      <div class="pagination">
        <div class="page-info">–ü–æ–∫–∞–∑–≤–∞—Ç —Å–µ 1‚Äì10 –æ—Ç 24 —Ä–µ–∑—É–ª—Ç–∞—Ç–∞</div>
        <div class="page-btns">
          <button class="page-btn">‚Üê</button>
          <button class="page-btn active">1</button>
          <button class="page-btn">2</button>
          <button class="page-btn">3</button>
          <button class="page-btn">‚Üí</button>
        </div>
      </div>
    </div>

  </div>
</main>

<script>
  
  // –ü–æ–∫–∞–∂–∏ —Ä–µ–∞–ª–Ω–æ—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—Å–∫–æ –∏–º–µ
  (function() {
    var u = JSON.parse(localStorage.getItem('imotiq_user') || 'null');
    if (!u || !u.name) return;
    document.querySelectorAll('.user-name').forEach(function(el) { el.textContent = u.name; });
    document.querySelectorAll('.avatar').forEach(function(el) {
      if (u.avatar) {
        el.innerHTML = '<img src="' + u.avatar + '" style="width:100%;height:100%;border-radius:50%;object-fit:cover">';
      } else {
        el.textContent = u.name.charAt(0).toUpperCase();
      }
    });
    document.querySelectorAll('.user-plan').forEach(function(el) {
      var plans = {free:'–ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω', standard:'–°—Ç–∞–Ω–¥–∞—Ä—Ç', pro:'–ü—Ä–æ', broker:'–ë—Ä–æ–∫–µ—Ä'};
      el.textContent = plans[u.plan] || '–ë–µ–∑–ø–ª–∞—Ç–µ–Ω –ø–ª–∞–Ω';
    });
  })();

  document.getElementById('currentDate').textContent = new Date().toLocaleDateString('bg-BG',{weekday:'long',day:'numeric',month:'long'});

  const data = [
    { icon:'üèôÔ∏è', name:'–õ–æ–∑–µ–Ω–µ—Ü, 3-—Å—Ç–∞–µ–Ω', addr:'–±—É–ª. –ß–µ—Ä–Ω–∏ –í—Ä—ä—Ö 45', date:'–î–Ω–µ—Å', score:4.2, scoreClass:'bad', price:'285,000', fair:'238,000', diff:'+19.7%', diffColor:'var(--red)', verdict:'–ù–∞–¥—Ü–µ–Ω–µ–Ω–∞', verdictStyle:'background:var(--red-dim);color:var(--red)' },
    { icon:'üè¢', name:'–ú–ª–∞–¥–æ—Å—Ç 1, 2-—Å—Ç–∞–µ–Ω', addr:'–±—É–ª. –ê–ª–µ–∫—Å–∞–Ω–¥—ä—Ä –ú–∞–ª–∏–Ω–æ–≤', date:'–í—á–µ—Ä–∞', score:8.1, scoreClass:'good', price:'142,000', fair:'145,000', diff:'-2.1%', diffColor:'var(--green)', verdict:'–î–æ–±—Ä–∞ —Ü–µ–Ω–∞', verdictStyle:'background:var(--green-dim);color:var(--green)' },
    { icon:'üåø', name:'–í–∏—Ç–æ—à–∞, –°—Ç—É–¥–∏–æ', addr:'—É–ª. –î–æ–±—Ä–∏–ª–∞ 18', date:'3 –¥–Ω–∏', score:6.5, scoreClass:'mid', price:'89,000', fair:'84,000', diff:'+6.0%', diffColor:'var(--gold)', verdict:'–õ–µ–∫–æ –Ω–∞–¥—Ü–µ–Ω–µ–Ω–∞', verdictStyle:'background:var(--gold-dim);color:var(--gold)' },
    { icon:'üèòÔ∏è', name:'–ù–∞–¥–µ–∂–¥–∞, 2-—Å—Ç–∞–µ–Ω', addr:'–±—É–ª. –†–æ–∂–µ–Ω 12', date:'5 –¥–Ω–∏', score:7.8, scoreClass:'good', price:'118,000', fair:'120,000', diff:'-1.7%', diffColor:'var(--green)', verdict:'–î–æ–±—Ä–∞ —Ü–µ–Ω–∞', verdictStyle:'background:var(--green-dim);color:var(--green)' },
    { icon:'üå≤', name:'–°–∏–º–µ–æ–Ω–æ–≤–æ, –°—Ç—É–¥–∏–æ', addr:'—É–ª. –ë–æ—è–Ω—Å–∫–æ —à–æ—Å–µ 4', date:'1 —Å–µ–¥–º.', score:3.1, scoreClass:'bad', price:'175,000', fair:'128,000', diff:'+36.7%', diffColor:'var(--red)', verdict:'–°–∏–ª–Ω–æ –Ω–∞–¥—Ü–µ–Ω–µ–Ω–∞', verdictStyle:'background:var(--red-dim);color:var(--red)' },
    { icon:'üè°', name:'–ë–æ—è–Ω–∞, 4-—Å—Ç–∞–µ–Ω', addr:'—É–ª. –ü–∞—Å–∫–∞–ª –¢—ä—Ä–ø–∞–Ω–æ–≤ 9', date:'1 —Å–µ–¥–º.', score:7.2, scoreClass:'good', price:'420,000', fair:'415,000', diff:'+1.2%', diffColor:'var(--green)', verdict:'–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞', verdictStyle:'background:var(--green-dim);color:var(--green)' },
    { icon:'üèóÔ∏è', name:'–õ—é–ª–∏–Ω, 2-—Å—Ç–∞–µ–Ω', addr:'–±—É–ª. –î–æ–±—Ä–∏–Ω–æ–≤–∞ —Å–∫–∞–ª–∞', date:'2 —Å–µ–¥–º.', score:8.4, scoreClass:'good', price:'98,000', fair:'102,000', diff:'-3.9%', diffColor:'var(--green)', verdict:'–ü–æ–¥—Ü–µ–Ω–µ–Ω–∞!', verdictStyle:'background:var(--green-dim);color:var(--green)' },
    { icon:'üéì', name:'–°—Ç—É–¥–µ–Ω—Ç—Å–∫–∏, 1-—Å—Ç–∞–µ–Ω', addr:'—É–ª. –ê–∫–∞–¥. –ë–æ—Ä–∏—Å –°—Ç–µ—Ñ–∞–Ω–æ–≤', date:'2 —Å–µ–¥–º.', score:5.5, scoreClass:'mid', price:'105,000', fair:'96,000', diff:'+9.4%', diffColor:'var(--gold)', verdict:'–ù–∞–¥—Ü–µ–Ω–µ–Ω–∞', verdictStyle:'background:var(--gold-dim);color:var(--gold)' },
    { icon:'üèôÔ∏è', name:'–õ–æ–∑–µ–Ω–µ—Ü, 2-—Å—Ç–∞–µ–Ω', addr:'—É–ª. –û–±–æ—Ä–∏—â–µ 32', date:'3 —Å–µ–¥–º.', score:6.1, scoreClass:'mid', price:'198,000', fair:'182,000', diff:'+8.8%', diffColor:'var(--gold)', verdict:'–ù–∞–¥—Ü–µ–Ω–µ–Ω–∞', verdictStyle:'background:var(--gold-dim);color:var(--gold)' },
    { icon:'üè¢', name:'–ú–ª–∞–¥–æ—Å—Ç 4, –°—Ç—É–¥–∏–æ', addr:'—É–ª. –ü—Ä–æ–ª–µ—Ç–Ω–∞ 7', date:'1 –º–µ—Å.', score:7.9, scoreClass:'good', price:'82,000', fair:'85,000', diff:'-3.5%', diffColor:'var(--green)', verdict:'–î–æ–±—Ä–∞ —Ü–µ–Ω–∞', verdictStyle:'background:var(--green-dim);color:var(--green)' },
  ];

  function renderTable(rows) {
    const body = document.getElementById('tableBody');
    body.innerHTML = rows.map(r => `
      <tr>
        <td>
          <div style="display:flex;align-items:center;gap:12px;">
            <div class="prop-thumb">${r.icon}</div>
            <div>
              <div class="prop-name">${r.name}</div>
              <div class="prop-addr">${r.addr}</div>
            </div>
          </div>
        </td>
        <td style="font-size:0.78rem;color:var(--cream-dim)">${r.date}</td>
        <td><span class="score-pill score-${r.scoreClass}">${r.score}/10</span></td>
        <td class="price-col">${r.price} –ª–≤</td>
        <td class="fair-col">${r.fair} –ª–≤</td>
        <td style="font-family:'Syne',sans-serif;font-weight:700;font-size:0.82rem;color:${r.diffColor}">${r.diff}</td>
        <td><span class="verdict-tag" style="${r.verdictStyle}">${r.verdict}</span></td>
        <td>
          <div class="row-actions">
            <button class="row-btn primary">–í–∏–∂</button>
            <button class="row-btn">üì• PDF</button>
            <button class="row-btn" onclick="this.closest('tr').style.opacity='0.3'">üóëÔ∏è</button>
          </div>
        </td>
      </tr>
    `).join('');
  }

  function filterTable(query) {
    if(!query) { renderTable(data); return; }
    const q = (query||'').toLowerCase();
    renderTable(data.filter(r => r.name.toLowerCase().includes(q) || r.addr.toLowerCase().includes(q)));
  }

  renderTable(data);

  // CURSOR
  const cursor=document.getElementById('cursor'), ring=document.getElementById('cursorRing');
  let mx=0,my=0,rx=0,ry=0;
  document.addEventListener('mousemove',e=>{ mx=e.clientX; my=e.clientY; cursor.style.left=mx-5+'px'; cursor.style.top=my-5+'px'; });
  function animRing(){ rx+=(mx-rx-16)*0.12; ry+=(my-ry-16)*0.12; ring.style.left=rx+'px'; ring.style.top=ry+'px'; requestAnimationFrame(animRing); }
  animRing();
  document.querySelectorAll('a,button,input,select').forEach(el=>{ el.addEventListener('mouseenter',()=>cursor.style.transform='scale(2.5)'); el.addEventListener('mouseleave',()=>cursor.style.transform='scale(1)'); });

  // MOBILE SIDEBAR
  function toggleSidebar(){
    document.querySelector('.sidebar').classList.toggle('open');
    document.getElementById('burgerBtn').classList.toggle('open');
    document.getElementById('mobileOverlay').classList.toggle('show');
  }
  function closeSidebar(){
    document.querySelector('.sidebar').classList.remove('open');
    document.getElementById('burgerBtn').classList.remove('open');
    document.getElementById('mobileOverlay').classList.remove('show');
  }
  // Close sidebar on nav click (mobile)
  document.querySelectorAll('.nav-item').forEach(a => a.addEventListener('click', closeSidebar));

</script>
</body>
</html>
